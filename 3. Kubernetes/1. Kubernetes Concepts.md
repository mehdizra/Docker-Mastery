---
tags:
  - Kubernetes
date: 2024-06-21
down: "[[2. Basic Terms of K8s]]"
---
![[12. The What and Why of Kubernetes __ 1.1 S12 Slides The What and Why of Kubernetes.pdf]]

## Orchestration 
- ارکستریشن مرحله ی بعدی در مسیر رشد DevOps است و ما باید بدانیم چرا به این مفهوم نیاز داریم.
- تمامی نرم افزارها لزوما به ارکستریتور نیاز ندارند اما این مفهوم در افکار عمومی بسیار مورد توجه قرار گرفته و میبینیم خیلی از شرکتها بدون وجود نیاز واقعی به این ابزار، از آن استفاده می کنند.
- ارکستریتورها تنها راه استفاده از کانتینرها نیستند و خیلی از شرکتها هم تحت تاثیر این جو قرار نگرفتند و صرفا از کانتینرها روی پلتفروم های ابری و بدون وجود ارکستریتور استفاده میکنند.
- خیلی از مفاهیم و ابزارهایی که ارکستریتورها از آنها برای مدیریت کانتینرها استفاده میکنند مثل `Elastic Load Balancing` یا `Auto Scaling Group` در طول دهه ها پیش وجود داشتند و مورد استفاده قرار میگرفتند و همچنان از لحاظ فنی لزومی به تغییر دادن همه چیز به ارکستریشن نیستیم. اما ارکستریشن چیزی است که صنعت در حال رفتن به سمت آن است.
- فرمولی که به ما کمک میکند تعیین کنیم از ارکستریتورها استفاده کنیم یا نه، به این شرح است: تعداد سرورهای ما x میزان تغییرات ما = افزایش نیاز به ارکستریتور. (`servers x change rate= Benfit of orchestration`)
- اگر ما یک توسعه دهنده تنها یا یک تیم کوچیک هستیم که دو یا سه سرور داریم که حداکثر ماهی یک بار تغییراتی در آن انجام میدهیم، در این صورت راه اندازی، مدیریت و ایجاد امنیت برای آنها آنقدری نیست که نیازی به ارکستریتور داشته باشیم. و پلتفروم های زیادی هستند که مدیریت این میزان از سرورها را برای ما انجام میدهند.
## Which Orchestrator?
- سوال مهم بعدی این است که از کدام ارکستریتور استفاده کنیم؟
	- چندین ارکستریتور محبوب وجود دارد و اگر پلتفورم های ابری را هم اضافه کنیم حدودا به 10 مورد محبوب و بزرگ می رسیم.
	- خیلی از کاربران به دنبال موردی هستند که hybrid باشد یعنی روی data center خودشان، به صورت On-premise و روی پلتفورم های cloud قابل راه اندازی باشد، بنابراین به دو ارکستریتور برتر میرسند که swarm و kubernetes هستند.
## Kubernetes or Swarm?
**سوال مهم بعدی که مطرح میشود این است و برای درک بهتر از جفت آنها نیازمند مرور اطلاعات قبلی هستیم**
- هردوی آنها container orchestrator هستند و روی container runtime اجرا می شوند.
- هر دوی آنها نرم افزارهای مجزایی هستند که تیم های توسعه قوی پشت خودشان دارند.
- در یک مقایسه کوتاه :
	- سوارم برای راه اندازی و مدیریت بسیار آسان است اما همه احتیاجات را برآورده نمی کند.
	- کوبرنتیز ویژگی ها و انعطاف و شخصی سازی بیشتری دارد و احتیاجات بیشتری را برآورده می کند. و پذیرش و حمایت بیشتری در جامعه دارد
- به عنوان یک مدیر سیستم ما باید هر دوی آنها را بشناسیم و استفاده کنیم و در عمل مقایسه کنیم.
- به طور کلی برای تیم های کوچک و تازمانی که سوارم کفایت میکند باید از سوارم استفاده کرد تا جایی که به محدودیت هایی برسیم که نیازمند ابزار پیچیده تری برای رفع آنها باشیم سراغ کوبرنتیز خواهیم رفت
- اما مزایای هر کدام به شرح زیر است:

| Advantage of Swarm                                                                                                                                                               | Advantage of Kubernetes                                                                                                                                      |
| -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| - همخوانی بیشتری با Docker دارد چرا که تیم توسعه آنها یکی است و باعث کاهش پیچدگی و استفاده کمتر از منابع می شود                                                                  | خیلی از پلتفورم های ابری نه تنها از آن پشتیبانی میکنند بلکه مدیریت آنرا به جای ما به عهده میگیرند و در صورتی که نخواهیم خودمان مدیریت کنیم گزینه مناسبی است. |
| ساده ترین ارکستریتور است چرا که با تفکر یک توسعه دهنده ایجاد شده و برای تیمهای عملیاتی و توسعه راحت است                                                                          | حتی ابزارهای زیرساختی مثل VMWare و Red Hat دیسترو کوبرنتیز خودشان را ارائه داده اند                                                                          |
| به راحتی قابل توسعه به هزاران سرور است و نیازمند تیم بزرگی برای مدیریت آن نیست                                                                                                   | پیشترین میزان پذیرش و حمایت برای کوبرنتیز وجود دارد                                                                                                          |
| اغلب نیازهای مورد نیاز صنعت را برآورده می کند. نه همه آنها را                                                                                                                    | بیشترین میزان سوالات و راهکارهای حل مشکلات در موارد مختلف در جامعه کاربران کوبرنتیز وجود دارد                                                                |
| هرجا که docker اجرا شود سوارم هم اجرا می شود و میتوان گفت نه فقط در لینوکس بلکه در همه جا قابلیت راه اندازی دارد (local, cloud, datacenter, ARM, windows server, 32-bit, 64-bit) | خیلی از ابزارهای مختلف برای تبلیغ و جذب مشتری پشتیبانی از کوبرنتیز را جزو پیشنهادات خود ارائه می دهند                                                        |
| به صورت پیش فرض امن است. و تمام مراودات آن رمزنگاری شده است.                                                                                                                     | خیلی از کارفرماها با ایده بروز بودن دستور استفاده از کوبرنتیز را میدهند و توان استفاده از آن به نوعی احتمال پذیرش ما توسط تیمها یا شرکت ها را افزایش می دهد  |
| عیب یابی بسیار راحتی دارد چرا که از لاگهای داکر استفاده می کند                                                                                                                   |                                                                                                                                                              |
## Kubernetes
- کوبرنتیز یک ارکستریتور کانتینر محبوب است.
- کاری که ارکستریتور کانتینرها انجام میدهد این است که تعداد زیادی سرور را هماهنگ میکند که طبق دستورالعملی که بهش میدهیم راه اندازی و تسک های مورد نظرمان را اجرا کنند.
- کوبرنتیز یکی از ارکستریتورهایی است که در سال 2014 توسط گوگل توسعه داده شد و به این دلیل که سورس باز است توسط جامعه برنامه نویسان علاقمند رشد و توسعه پیدا کرد.
- کوبرنتیز اساسا یک سری API است که روی کانتینرها اجرا می شود که هم تعدادی سرور را مدیریت کند و همینطور کانتینرهای ما را روی داکر اجرا کند.
- استفاده از کوبرنتیز به معنای رهایی از کانتینر ها نیست، در واقع یک سری کانتینر روی کانتینرهای ماست که میتواند سیستمهای multi node را مدیریت کند.
- همچنین Command line Interface و APIهایی در اختیار ما میگذارد که کانتینرهایمان رو روی سرورهایی که داریم مدیریت کنیم
- همانطور که در داکر از Docker CLI و در سوارم از Swarm CLI استفاده میکردیم در کوبرنتیز یکی از اصلی ترین ابزارهایی که استفاده میکنیم kube Control و kubectl است، برخی از افراد آنرا kube cuddle هم صدا میکنند.
- در پیش رو میبینیم که آپشن های بیشماری دارد و سرویس دهنده های ابری اغلب از آن پشتیبانی میکنند، حتی برخی از آنها رابط گرافیکی برای آن توسعه داده اند، تا کاربران را ترغیب کنند که برای مدیریت کانتینرهایشان با ابزار کوبرنتیز از سرویس ابری آنها استفاده کنند.
- برخی دیگر از سرویس دهندگان کوبرنتیز خودشان را توسعه داده اند که به آنها "distribution" میگوییم. مانند لینوکس که دیستروهای زیادی روی هسته آن نوشته شده در کوبرنتیز هم این اتفاق افتاده است و شرکتهای مختلفی ابزارهای مختلفی را پکیج کردند و با محوریت کوبرنتیز در بازار عرضه کردند.
- برای انتخاب یک دیسترو به موارد مختلفی مثل نیاز ما و عرضه فروشندگان این ابزار میتوان توجه کرد.

- سوال مهم بعدی این است که از کدام distro استفاده کنیم؟
	- این بستگی به این دارد که ما میخواهیم از راهکارهای ابری استفاده کنیم یا از دیستروهای موجود برای راه کارهای اختصاصی روی سرورهای خودمان استفاده کنیم؟ دیستروهایی مثل Docker Enterprise, Rancher, Openshift (from Red Hat), Canonical, Ubuntu, PKS (from VMWare)
	- تعداد زیادی شرکت کوبرنتیز خودشان را ارائه داده اند و همگی تایید شده هستند و قاعدتا ما باید با ساختاری که در فایل YML خود تعریف میکنیم بتوانیم روی همه آنها سرویس هایی که میخواهیم را راه اندازی کنیم
	- از موارد دیگری که برای انتخاب دیستروها باید به آن توجه کرد ابزارهایی است که به آن پیوست شدند، چرا که کوبرنتیز امکانیست که باید در کنار ابزارهای مختلف از آن استفاده کرد تا حقیقتا کار ارکستریشن برای کاربران تسهیل گردد. ابزارهایی مثل `Custom Authentication Solution` , `Custom Web Administration` , `Custom Networking` فقط برخی از آنها هستند.
	- یکی دیگر از آپشن های کاربران استفاده از کوبرنتیز خام که در GitHub وجود دارد است. اما با توجه به امکاناتی که دیستروها به ما میدهند آپشن منطقی نیست و بیشتر برای یادگیری و تمرین توصیه می شود
