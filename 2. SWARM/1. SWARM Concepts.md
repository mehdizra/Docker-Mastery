---
tags:
  - automation
  - docker
  - cluster
  - devops
up: "[[Home๐]]"
down: "[[2. Swarm Commands & Setting Up]]"
date: 2024-04-24
---
> [!hint] Reference
> to see docker references [click here](https://docs.docker.com/reference/)

[[2. Swarm Commands & Setting Up]]
[[3. Swarm Cluster]]
[[4. Overlay Multi-Host Networking]]
[[5. Swarm stack & Production Grade Compose]]
[[6. Secrets Storage]]

### [Containerization](https://en.wikipedia.org/wiki/Containerization_(computing)) from Wikipedia
> [!danger] Container management, orchestration, clustering
Container orchestration or container management is mostly used in the context of application containers. Implementations providing such orchestration include Kubernetes and Docker swarm.

> [!danger] Container cluster management
Container clusters need to be managed. This includes functionality to create a cluster, to upgrade the software or repair it, balance the load between existing instances, scale by starting or stopping instances to adapt to the number of users, to log activities and monitor produced logs or the application itself by querying sensors. Open-source implementations of such software include OKD and Rancher. Quite a number of companies provide container cluster management as a managed service, like Alibaba, Amazon, Google, Microsoft.

## what is SWARM?
Swarm is a server clustering solution that brings together different operating systems (hosts or nodes), into a single manageable unit that you can then orchestrate the lifecycle of your containers in.
![[7. Swarm Intro and Creating a 3-Node Swarm Cluster __ 1.5 S07 Swarm Intro Slides.pdf]]

> [!question]  ุฏุงฺฉุฑ ุณูุงุฑู ฺุณุชุ
ุฏุงฺฉุฑ ุณูุงุฑู ฺฉ ุงุจุฒุงุฑ ุงุณุช ฺฉู ุจุฑุง ุฑุงู ุงูุฏุงุฒ ู ูุฏุฑุช ฺฉุงูุชูุฑูุง ุฏุฑ ุชุนุฏุงุฏ ุจุงูุง ู ุจู ุตูุฑุช ุฎูุดู ุง ุจู ฺฉุงุฑ ู ุขุฏ.

> [!idea]  ูุญุฏูุฏุช ูุง ุฏุฑ ุฏุงฺฉุฑ ุณูุงุฑู
**ููุช ุฑู ูุงุดู ฺฉู ุฏุงฺฉุฑ ูุตุจ ุดุฏู ุงุณุชุ swarm ุฑุง ูุนุงู ูฺฉููุ ุงู ูุงุจูุช ุงุถุงูู ู ุดูุฏ ฺฉู ฺฉุงูุชูุฑูุง ุฎูุฏ ุฑุง ุฏุฑ ูุงูุจ serviceูุง ูุฎุชูู ุชุนุฑู ู ุฑุงู ุงูุฏุงุฒ ฺฉูู ฺฉู ูุฑ ุณุฑูุณ ูุชูุงูุฏ ุดุงูู ุชุนุฏุงุฏ ูุงูุญุฏูุฏ ฺฉุงูุชูุฑ ููุณุงู ุจุงุดุฏ ฺฉู ุฏุฑ ุงู ุญุงูุช ุจู ุขููุง task ุง replicas ู ฺฏููุ ูุญุฏูุฏุช ูุง ุฏุฑ ุชุนุฑู swarm ุงุณุช ุนู ุฑู ูุฑ ูุงุดู (node) ูุชูุงูู ููุท ฺฉ swarm ุชุนุฑู ฺฉููุ ุจูุงุจุฑุงู ุจุง ูุฌูุฏ ฺูุฏ node ูุชูุงูู ฺูุฏ swarm ุฏุงุดุชู ุจุงุดู ู ุจู ููุฏฺฏุฑ join ฺฉูู ู ฺฉ [[3. Swarm Cluster]] ุงุฌุงุฏ ฺฉูู.**

- ุจุง ุฏุงฺฉุฑ ุณูุงุฑู ูุง ูุชูุงูู ูุฑู ุงูุฒุงุฑ ุฎูุฏ ุฑุง ุจู ุตูุฑุช ฺฉ ุณุฑูุณ ุฑุงู ุงูุฏุงุฒ ฺฉูู.
- ุงู ุณุฑูุณ ุฑุง ูุชูุงูู ุฑู ูุฑ ุณุฎุช ุงูุฒุงุฑ (ูุงุดู ูุฒฺฉ ุง ูุฌุงุฒ ุง ุงุจุฑ) ุจู ุตูุฑุช ฺฉุณุงู ุงุฌุฑุง ฺฉูู.
- ุงู ุณุฑูุณ ุฑุง ูุชูุงูู ุฏุฑ ุชุนุฏุงุฏ ุจุดูุงุฑ ุณุฑูุฑ ุง node ุจู ุตูุฑุช ุงุชููุงุชฺฉ ุงุฌุฑุง ฺฉูู.
- ุชูุงู ฺุฑุฎู ุฒูุฏฺฏ ุงู ุชุนุฏุงุฏ ุฒุงุฏ ุงุฒ ฺฉุงูุชูุฑูุง ุดุงูู ุฑุงู ุงูุฏุงุฒ ุชูููุ ุชุบุฑ ู ุจุฑูุฒุฑุณุงู ุฑุง ูุฏุฑุช ฺฉูู.
- ุณุฑูุณ ูุง ุจู ฺฏููู ูุณุชูุฏ ฺฉู ุฏุฑ ุตูุฑุช ุชููู ฺฉุงูุชูุฑูุงุ ุจุงุฒ ุชููุฏ ู ุดููุฏ. ูุจ[](3.%20Swarm%20Cluster.md)ุฑุณุงู ู ุดููุฏ.
- ุดุจฺฉู ุฏุงุฎู ุจู ุณุฑูุณูุง ุฏุฑ ุณูุงุฑู ุงุฒ ููุน ุฌุฏุฏ ุงุณุช.
- ุงุฑุชุจุงุทุงุช ุจู ุณุฑูุณ ูุง ฺฉุงููุง ุฑูุฒูฺฏุงุฑ ุดุฏู ุงุณุช ู ุงุฒ ููููู PKI ุจุฑุง ุงู ุงูุฑ ุงุณุชูุงุฏู ู ุดูุฏ.
- ุฏุฑ ุณูุงุฑู ูุงุฒููุฏ ุฐุฎุฑู ุณุงุฒ ุงุทูุงุนุงุช ููู ูุซู ุฑูุฒ ูุง ุฏุฑ ูุธุฑ ฺฏุฑูุชู ุดุฏู ุงุณุช.
- ุณูุงุฑู ุจู ุตูุฑุช ูพุด ูุฑุถ ุฑู ุฏุงฺฉุฑ ูุนุงู ูุณุช ู ุจุงุฏ ูุนุงู ุดูุฏ.

### Manager & Worker concept
![[Pasted image 20240424155221.png]]
- ุฏุฑ ุงู ููููู ุจุฑุฎ ุงุฒ ููุฏูุง Manager ู ุจุฑุฎ ุฏฺฏุฑ Worker ู ุดููุฏ ฺฉู ุจู ุฑุงุญุช ูุงุจูุช ุชุบุฑ ุฏุงุฑูุฏ.
- ุฏุฑ ูุงูุน Manager ูุง ููุงู Worker ูุง ูุณุชูุฏ ฺฉู ูุฌูุฒ ูุฏุฑุช ุณูุงุฑู ุฑุง ุฏุงุฑูุฏ.
- ุชููุง ูุงุฒููุฏ ุณุฑูุฑูุง ฺฉู ุงู ููุดูุง ุฑุง ุงูุง ูฺฉููุฏ ุงู ุงุณุช ฺฉู Docker ุฑู ุขููุง ูุตุจ ุดุฏู ุจุงุดุฏ ู ุจูู ูุฑุงุญู ุงุชููุงุชฺฉ ุงูุฌุงู ู ุดูุฏ.

ุงุฒ ฺฉ ููุธุฑ ูพฺุฏู ุชุฑ:
![[Pasted image 20240424155556.png]]
### Raft Consensus Database
ุณุณุชู Raft ฺฉ ูพุฑูุชฺฉู ุงุณุช ฺฉู ุซุจุงุช ุงุทูุงุนุงุช ุจู ฺูุฏู node ุฑุง ุชุงูู ูฺฉูุฏ. ุจุฑุง ุงุทูุงุนุงุช ุจุดุชุฑ ุงูุฌุง ฺฉูฺฉ ฺฉูุฏ:
https://thesecretlivesofdata.com/raft/

### Docker Service Command:
- ุฏุฑ ุณูุงุฑู ุฏุณุชูุฑุงุช Docker Service ุฌุงฺฏุฒู ุฏุณุชูุฑุงุช Docker run ูุณุชูุฏ ุจุง ุงู ุชูุงูุช ฺฉู ูฺฺฏ ูุง ูุซู ุงุฌุงุฏ replicas ฺฉู ุจู ุขููุง task ฺฏูุชู ู ุดูุฏ.
- ูุฑ ุณุฑูุณ ู ุชูุงูุฏ task ูุง ุฒุงุฏ ุฏุงุดุชู ุจุงุดุฏุ ฺฉู ูุฑ ฺฉุฏุงู ุงุฒ ุขู task ูุง ฺฉ ฺฉุงูุชูุฑ ุฑุง ุงุฌุงุฏ ู ฺฉููุฏ.
![[Pasted image 20240424160417.png]]
ุจุง ุฏุณุชูุฑ docker service create ูุชูุงู ฺฉ ุณุฑูุณ ูุซูุง nginx ุฑุงู ุงูุฏุงุฒ ฺฉุฑุฏ ู ุฏุฑ ุขู ุณุฑูุณ manager node ุชุตูู ูฺฏุฑุฏ ฺฉู replica ูุง ฺฉุฌุง ูุฑุงุฑ ุจฺฏุฑูุฏุ ุจู ุตูุฑุช ูพุด ูุฑุถ ุขููุง ุฏุฑ ูุงุดู ูุง ุฏฺฏุฑ ูุฑุงุฑ ูฺฏุฑูุฏ ู ุงุฒ nginx image ฺฉุงูุชูุฑ ุฎูุฏุดุงู ุฑุง ู ุณุงุฒูุฏ. ุงูุง ูุฑุขูุฏ ุนููฺฉุฑุฏ manager ู worker ุฏุฑ ูพุณ ุฒููู ุจู ุดฺฉู ุฒุฑ ุงุณุช:
![[Pasted image 20240424161633.png]]
ููู ุงู ูุงุจูุช ูุง ุจู ูุง ุงู ุงูฺฉุงู ุฑุง ู ุฏููุฏ ฺฉู ูุง ฺฉุงูุชูุฑ ูุง ุฎูุฏ ุฑุง ุฏุฑ ูุถุง ุงูุชุฑูุช ุฑุงู ุงูุฏุงุฒ ู ุจู ุตูุฑุช ุงูู ู ูุงุจู ุงุนุชูุงุฏ ุชูุณุนู ุฏูู ู ุงุณุชูุงุฏู ฺฉูู.